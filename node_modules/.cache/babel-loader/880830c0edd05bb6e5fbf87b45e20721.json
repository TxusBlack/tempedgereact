{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\migue\\\\Documents\\\\Jose\\\\TempEdge\\\\tempedgereact\\\\tempedgereact - jose\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\migue\\\\Documents\\\\Jose\\\\TempEdge\\\\tempedgereact\\\\tempedgereact - jose\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport { LOGIN, SAVE_FORM_POSITION } from './types';\nimport history from '../../history.js';\nimport Axios from 'axios'; //import ls from 'local-storage'\n\nimport httpService from '../../utils/services/httpService/httpService';\nvar baseUrlTempEdge = \"http://96.56.31.162:9191\";\nexport var doLogin = function doLogin(url, data) {\n  return function (dispatch) {\n    //'dispatch', courtesy of the Thunk middleware so we can call it directly\n    httpService.getAuthToken('/oauth/token', data).then(\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(res) {\n        var token;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                token = res.data.access_token;\n                data.IPAddress = window.location.hostname;\n                sessionStorage.setItem('access_token', token);\n                Axios({\n                  url: baseUrlTempEdge + url,\n                  method: 'get',\n                  headers: {\n                    'Content-Type': 'application/json'\n                  },\n                  data: data,\n                  params: {\n                    access_token: token\n                  }\n                }).then(function (response) {\n                  console.log(\"response: \", response);\n                  dispatch({\n                    type: LOGIN,\n                    payload: response.data.result\n                  });\n                  var lang = window.location.pathname;\n                  lang = lang.split(\"/\");\n                  console.log(\"response.data.result.portalUserList[0].status: \", response.data.result.portalUserList[0].status);\n\n                  if (response.data.result.portalUserList[0].status === \"A\" && response.data.result.portalUserList[0].organizationEntity.status === \"A\") {\n                    history.push(\"/protected/\".concat(lang[2]));\n                  } else if (response.data.result.portalUserList[0].status === \"P\" && response.data.result.portalUserList[0].organizationEntity.status === \"A\" && response.data.result.portalUserList[0].userRoleId >= 4) {\n                    history.push(\"/pending/user/\".concat(lang[2]));\n                  } else if (response.data.result.portalUserList[0].status === \"P\" && response.data.result.portalUserList[0].organizationEntity.status === \"P\" && response.data.result.portalUserList[0].userRoleId >= 4) {\n                    history.push(\"/pending/agency/\".concat(lang[2]));\n                  } else if (response.data.result.portalUserList[0].status === \"D\" && response.data.result.portalUserList[0].organizationEntity.status === \"A\" && response.data.result.portalUserList[0].userRoleId >= 4) {\n                    history.push(\"/denied/user/\".concat(lang[2])); //history.push(`/register/${lang[2]}`);\n                  } else if (response.data.result.portalUserList[0].status === \"D\" && response.data.result.portalUserList[0].organizationEntity.status === \"D\" && response.data.result.portalUserList[0].userRoleId >= 4) {\n                    history.push(\"/denied/agency/\".concat(lang[2])); //history.push(`/registerAgency/${lang[2]}`);\n                  } else if (response.data.result.portalUserList[0].status === \"ERROR\") {\n                    history.push(\"/error/\".concat(lang[2]));\n                  } else {\n                    history.push(\"/auth/\".concat(lang[2]));\n                  }\n                });\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }()).catch(function (error) {\n      var lang = window.location.pathname;\n      lang = lang.split(\"/\");\n      history.push(\"/error/\".concat(lang[2]));\n    });\n  };\n};\nexport var tempedgeAPI = function tempedgeAPI(url, data, actionName) {\n  return function (dispatch) {\n    var token = sessionStorage.getItem('access_token');\n    data.IPAddress = window.location.hostname;\n    Axios({\n      url: baseUrlTempEdge + url,\n      method: 'post',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      data: data,\n      params: {\n        access_token: token\n      }\n    }).then(function (response) {\n      console.log(\"response: \", response);\n      dispatch({\n        type: actionName,\n        payload: response.data.result\n      });\n    });\n  };\n};\nexport var getList = function getList(url, actionName) {\n  return function (dispatch) {\n    console.log(\"GETTING THE LIST !!!!!!\");\n    httpService.getList(url).then(function (response) {\n      dispatch({\n        type: actionName,\n        payload: response.data.result\n      });\n    });\n  };\n};\nexport var storeFormPageNumber = function storeFormPageNumber(formName, position) {\n  var lastPos = {\n    form: formName,\n    pos: position\n  };\n  console.log(\"lastPos: \", lastPos);\n  return function (dispatch) {\n    console.log(\"lastPos --dispatch -- : \", lastPos);\n    dispatch({\n      type: SAVE_FORM_POSITION,\n      payload: lastPos\n    });\n  };\n};","map":{"version":3,"sources":["C:\\Users\\migue\\Documents\\Jose\\TempEdge\\tempedgereact\\tempedgereact - jose\\src\\Redux\\actions\\tempEdgeActions.js"],"names":["LOGIN","SAVE_FORM_POSITION","history","Axios","httpService","baseUrlTempEdge","doLogin","url","data","dispatch","getAuthToken","then","res","token","access_token","IPAddress","window","location","hostname","sessionStorage","setItem","method","headers","params","response","console","log","type","payload","result","lang","pathname","split","portalUserList","status","organizationEntity","push","userRoleId","catch","error","tempedgeAPI","actionName","getItem","getList","storeFormPageNumber","formName","position","lastPos","form","pos"],"mappings":"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","sourcesContent":["import { LOGIN, SAVE_FORM_POSITION } from './types';\r\nimport history from '../../history.js';\r\nimport Axios from 'axios';\r\n//import ls from 'local-storage'\r\nimport httpService from '../../utils/services/httpService/httpService';\r\n\r\nlet baseUrlTempEdge = `http://96.56.31.162:9191`;\r\n\r\nexport let doLogin = (url, data) => {\r\n  return (dispatch) => {   //'dispatch', courtesy of the Thunk middleware so we can call it directly\r\n    httpService.getAuthToken('/oauth/token', data)\r\n      .then(async(res) => {\r\n        let token = res.data.access_token;\r\n        data.IPAddress = window.location.hostname;\r\n\r\n        sessionStorage.setItem('access_token', token);\r\n        Axios({\r\n          url: baseUrlTempEdge + url,\r\n          method: 'get',\r\n          headers: {\r\n            'Content-Type': 'application/json'\r\n          },\r\n          data: data,\r\n          params: {\r\n            access_token: token\r\n          }\r\n        }).then((response) => {\r\n          console.log(\"response: \", response);\r\n          dispatch({\r\n            type: LOGIN,\r\n            payload: response.data.result\r\n          });\r\n\r\n          let lang = window.location.pathname;\r\n          lang = lang.split(\"/\");\r\n\r\n          console.log(\"response.data.result.portalUserList[0].status: \", response.data.result.portalUserList[0].status);\r\n          if(response.data.result.portalUserList[0].status === \"A\" && response.data.result.portalUserList[0].organizationEntity.status === \"A\"){\r\n            history.push(`/protected/${lang[2]}`);\r\n          }else if(response.data.result.portalUserList[0].status === \"P\"  && response.data.result.portalUserList[0].organizationEntity.status === \"A\" && response.data.result.portalUserList[0].userRoleId >= 4){\r\n            history.push(`/pending/user/${lang[2]}`);\r\n          }else if(response.data.result.portalUserList[0].status === \"P\"  && response.data.result.portalUserList[0].organizationEntity.status === \"P\" && response.data.result.portalUserList[0].userRoleId >= 4){\r\n            history.push(`/pending/agency/${lang[2]}`);\r\n          }else if(response.data.result.portalUserList[0].status === \"D\"  && response.data.result.portalUserList[0].organizationEntity.status === \"A\" && response.data.result.portalUserList[0].userRoleId >= 4){\r\n            history.push(`/denied/user/${lang[2]}`);\r\n            //history.push(`/register/${lang[2]}`);\r\n          }else if(response.data.result.portalUserList[0].status === \"D\"  && response.data.result.portalUserList[0].organizationEntity.status === \"D\" && response.data.result.portalUserList[0].userRoleId >= 4){\r\n            history.push(`/denied/agency/${lang[2]}`);\r\n            //history.push(`/registerAgency/${lang[2]}`);\r\n          }else if(response.data.result.portalUserList[0].status === \"ERROR\"){\r\n            history.push(`/error/${lang[2]}`);\r\n          }else{\r\n            history.push(`/auth/${lang[2]}`);\r\n          }\r\n        });\r\n      }).catch((error) => {\r\n        let lang = window.location.pathname;\r\n        lang = lang.split(\"/\");\r\n\r\n        history.push(`/error/${lang[2]}`);\r\n      });\r\n  }\r\n}\r\n\r\nexport let tempedgeAPI = (url, data, actionName) => {\r\n  return (dispatch) => {\r\n    let token = sessionStorage.getItem('access_token');\r\n    data.IPAddress = window.location.hostname;\r\n    Axios({\r\n      url: baseUrlTempEdge + url,\r\n      method: 'post',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      data: data,\r\n      params: {\r\n        access_token: token\r\n      }\r\n    }).then((response) => {\r\n      console.log(\"response: \", response);\r\n      dispatch({\r\n        type: actionName,\r\n        payload: response.data.result\r\n      });\r\n    });\r\n  }\r\n}\r\n\r\nexport let getList = (url, actionName) => {\r\n  return (dispatch) => {\r\n    console.log(\"GETTING THE LIST !!!!!!\");\r\n    httpService.getList(url)\r\n      .then((response) => {\r\n        dispatch({\r\n          type: actionName,\r\n          payload: response.data.result\r\n        });\r\n      });\r\n    }\r\n}\r\n\r\nexport let storeFormPageNumber = (formName, position) => {\r\n  let lastPos = {\r\n    form: formName,\r\n    pos: position\r\n  };\r\n  console.log(\"lastPos: \", lastPos);\r\n  return (dispatch) => {\r\n    console.log(\"lastPos --dispatch -- : \", lastPos);\r\n    dispatch({\r\n      type: SAVE_FORM_POSITION,\r\n      payload: lastPos\r\n    });\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}