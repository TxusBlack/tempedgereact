{"ast":null,"code":"import _classCallCheck from \"/home/havoc/Documents/TempEdge/git/frontend/tempedgereact/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/havoc/Documents/TempEdge/git/frontend/tempedgereact/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/havoc/Documents/TempEdge/git/frontend/tempedgereact/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/havoc/Documents/TempEdge/git/frontend/tempedgereact/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/havoc/Documents/TempEdge/git/frontend/tempedgereact/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/havoc/Documents/TempEdge/git/frontend/tempedgereact/src/Pages/FaceMash/FaceMashDesktop.js\";\nimport React from \"react\";\nimport ReactDOM from 'react-dom';\nimport Webcam from \"react-webcam\";\nimport { connect } from 'react-redux';\nimport { withLocalize, Translate } from 'react-localize-redux';\nimport { setActivePage } from '../../Redux/actions/tempEdgeActions';\nimport Tracker from '../assets/tracking';\nimport ModalConfirm from '../../Modals/FaceMashConfirm/Modal';\nimport ModalFail from '../../Modals/FaceMashFail/Modal';\nvar $ = window.$;\nvar canvas_width = 320;\nvar canvas_height;\n\nvar FaceMashDesktop =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(FaceMashDesktop, _React$Component);\n\n  function FaceMashDesktop() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, FaceMashDesktop);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(FaceMashDesktop)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      employeeName: \"\",\n      timeStatus: \"\",\n      trackerTask: null\n    };\n\n    _this.setRef = function (webcam) {\n      _this.webcam = webcam;\n    };\n\n    _this.capture = function () {\n      var imageSrc = _this.webcam.getScreenshot(); //CALL TO SERVER REST API\n      // ...\n      //***\n      //ONCE CALL ON PROMISE SOLVED DO THIS:\n\n      /*** ON SUCCESS ***/\n\n\n      _this.setState({\n        employeeName: \"Luis Diaz\",\n        timeStatus: \"In\"\n      }, function () {\n        _this.toggleModal(0); //Opens Sucess Modal\n\n      });\n      /*** ON FAIL ***/\n      // this.setState({\n      //   employeeName: \"Luis Diaz\"\n      // }, () => {\n      //   this.toggleModal(-1);   //Opens Fail Modal\n      // });\n\n    };\n\n    return _this;\n  }\n\n  _createClass(FaceMashDesktop, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var canvas = document.getElementById('canvas');\n      var context = canvas.getContext('2d');\n      var tracker = new window.tracking.ObjectTracker(\"face\"); //Tracker, canvas and context are needed to turn off the camera on componentUnmount\n\n      this.setState({\n        trackerTask: window.tracking.track('#facemash', tracker, {\n          camera: true\n        })\n      });\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.state.trackerTask.events_.stopVideoFeed[0]();\n    }\n  }, {\n    key: \"toggleModal\",\n    //Open Login success/failure modals\n    value: function toggleModal(mode) {\n      if (mode > -1) {\n        $(ReactDOM.findDOMNode(this.refs.faceMashConfirmModal)).modal();\n      } else if (mode < 0) {\n        $(ReactDOM.findDOMNode(this.refs.faceMashFailModal)).modal();\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var videoConstraints = {\n        width: canvas_width,\n        height: canvas_height,\n        facingMode: \"user\"\n      };\n      return React.createElement(\"div\", {\n        className: \"container-fluid\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-md-8 col-md-offset-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          height: 40\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        style: {\n          position: \"relative\",\n          width: videoConstraints.width,\n          height: videoConstraints.height,\n          marginBottom: 40\n        },\n        className: \"center-block\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, React.createElement(Webcam, {\n        className: \"center-block\",\n        audio: false,\n        height: 240,\n        id: \"facemash\",\n        ref: this.setRef,\n        screenshotFormat: \"image/jpeg\",\n        width: 320,\n        videoConstraints: videoConstraints,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }), React.createElement(\"canvas\", {\n        id: \"canvas\",\n        width: \"320\",\n        height: \"240\",\n        style: {\n          position: \"absolute\",\n          top: 0\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      })), React.createElement(\"button\", {\n        className: \"btn btn-default phone-num-btn-close center-block\",\n        onClick: this.capture,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, \"Capture photo\"), React.createElement(ModalConfirm, {\n        title: \"TempEdge Time Track\",\n        employee: this.state.employeeName,\n        timeStatus: this.state.timeStatus,\n        reStartfaceDetectTracker: null,\n        ref: \"faceMashConfirmModal\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }), React.createElement(ModalFail, {\n        title: \"TempEdge Time Track\",\n        employee: this.state.employeeName,\n        reStartfaceDetectTracker: null,\n        ref: \"faceMashFailModal\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }))));\n    }\n  }]);\n\n  return FaceMashDesktop;\n}(React.Component);\n\nexport default withLocalize(connect(null)(FaceMashDesktop));","map":{"version":3,"sources":["/home/havoc/Documents/TempEdge/git/frontend/tempedgereact/src/Pages/FaceMash/FaceMashDesktop.js"],"names":["React","ReactDOM","Webcam","connect","withLocalize","Translate","setActivePage","Tracker","ModalConfirm","ModalFail","$","window","canvas_width","canvas_height","FaceMashDesktop","state","employeeName","timeStatus","trackerTask","setRef","webcam","capture","imageSrc","getScreenshot","setState","toggleModal","canvas","document","getElementById","context","getContext","tracker","tracking","ObjectTracker","track","camera","events_","stopVideoFeed","mode","findDOMNode","refs","faceMashConfirmModal","modal","faceMashFailModal","videoConstraints","width","height","facingMode","position","marginBottom","top","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport ReactDOM from 'react-dom';\nimport Webcam from \"react-webcam\";\nimport { connect } from 'react-redux';\nimport { withLocalize, Translate } from 'react-localize-redux';\nimport  { setActivePage } from '../../Redux/actions/tempEdgeActions';\nimport Tracker from '../assets/tracking';\nimport ModalConfirm from '../../Modals/FaceMashConfirm/Modal';\nimport ModalFail from '../../Modals/FaceMashFail/Modal';\n\nconst $ = window.$;\n\nlet canvas_width = 320;\nlet canvas_height: 240;\n\nclass FaceMashDesktop extends React.Component {\n  state = {\n    employeeName: \"\",\n    timeStatus: \"\",\n    trackerTask: null\n  };\n\n  componentDidMount(){\n    let canvas = document.getElementById('canvas');\n    let context = canvas.getContext('2d');\n    let tracker = new window.tracking.ObjectTracker(\"face\");      //Tracker, canvas and context are needed to turn off the camera on componentUnmount\n\n    this.setState({\n      trackerTask: window.tracking.track('#facemash', tracker, { camera: true })\n    });\n  }\n\n  componentWillUnmount(){\n    this.state.trackerTask.events_.stopVideoFeed[0]();\n  }\n\n  setRef = webcam => {\n    this.webcam = webcam;\n  };\n\n  capture = () => {\n    let imageSrc = this.webcam.getScreenshot();\n\n    //CALL TO SERVER REST API\n    // ...\n    //***\n\n    //ONCE CALL ON PROMISE SOLVED DO THIS:\n\n    /*** ON SUCCESS ***/\n    this.setState({\n      employeeName: \"Luis Diaz\",\n      timeStatus: \"In\"\n    }, () => {\n      this.toggleModal(0);   //Opens Sucess Modal\n    });\n\n    /*** ON FAIL ***/\n    // this.setState({\n    //   employeeName: \"Luis Diaz\"\n    // }, () => {\n    //   this.toggleModal(-1);   //Opens Fail Modal\n    // });\n  };\n\n  //Open Login success/failure modals\n  toggleModal(mode){\n    if(mode > -1){\n      $(ReactDOM.findDOMNode(this.refs.faceMashConfirmModal)).modal();\n    }else if(mode < 0){\n      $(ReactDOM.findDOMNode(this.refs.faceMashFailModal)).modal();\n    }\n  }\n\n  render() {\n    let videoConstraints = {\n      width: canvas_width,\n      height: canvas_height,\n      facingMode: \"user\"\n    };\n\n    return(\n      <div className=\"container-fluid\">\n        <div className=\"row\">\n          <div className=\"col-md-8 col-md-offset-2\">\n            <div style={{height:40}}></div>\n            <div style={{position: \"relative\", width: videoConstraints.width, height: videoConstraints.height, marginBottom:40}} className=\"center-block\">\n              <Webcam className=\"center-block\"\n                audio={false}\n                height={240}\n                id=\"facemash\"\n                ref={this.setRef}\n                screenshotFormat=\"image/jpeg\"\n                width={320}\n                videoConstraints={videoConstraints}\n              />\n              <canvas id=\"canvas\" width=\"320\" height=\"240\" style={{position: \"absolute\", top: 0}}></canvas>\n            </div>\n            <button className=\"btn btn-default phone-num-btn-close center-block\" onClick={this.capture}>Capture photo</button>\n            <ModalConfirm title=\"TempEdge Time Track\" employee={this.state.employeeName} timeStatus={this.state.timeStatus} reStartfaceDetectTracker={null} ref=\"faceMashConfirmModal\" />\n            <ModalFail title=\"TempEdge Time Track\" employee={this.state.employeeName} reStartfaceDetectTracker={null} ref=\"faceMashFailModal\" />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default withLocalize(connect(null)(FaceMashDesktop));\n"]},"metadata":{},"sourceType":"module"}