{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\migue\\\\Documents\\\\Jose\\\\TempEdge\\\\tempedgereact\\\\tempedgereact - jose\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\migue\\\\Documents\\\\Jose\\\\TempEdge\\\\tempedgereact\\\\tempedgereact - jose\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"C:\\\\Users\\\\migue\\\\Documents\\\\Jose\\\\TempEdge\\\\tempedgereact\\\\tempedgereact - jose\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\migue\\\\Documents\\\\Jose\\\\TempEdge\\\\tempedgereact\\\\tempedgereact - jose\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\migue\\\\Documents\\\\Jose\\\\TempEdge\\\\tempedgereact\\\\tempedgereact - jose\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\migue\\\\Documents\\\\Jose\\\\TempEdge\\\\tempedgereact\\\\tempedgereact - jose\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\migue\\\\Documents\\\\Jose\\\\TempEdge\\\\tempedgereact\\\\tempedgereact - jose\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\migue\\\\Documents\\\\Jose\\\\TempEdge\\\\tempedgereact\\\\tempedgereact - jose\\\\src\\\\Pages\\\\Login\\\\Login.js\";\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { reset, change, untouch } from 'redux-form';\nimport PropTypes from 'prop-types';\nimport InputBox from '../../components/common/InputBox/InputBox.js';\nimport { Field, reduxForm } from 'redux-form';\nimport { withLocalize, Translate } from 'react-localize-redux';\nimport Captcha from '../../components/common/Captcha/Captcha';\nimport Validate from '../Validations/Validations';\nimport ActiveLanguageAddTranslation from '../../components/common/ActiveLanguageAddTranslation/ActiveLanguageAddTranslation.js';\nimport { push } from 'connected-react-router';\nimport { notify } from 'reapop';\nimport httpService from '../../utils/services/httpService/httpService.js';\nimport actions from '../../Redux/actions/tempEdgeActions.js';\nimport { doLogin } from '../../Redux/actions/tempEdgeActions';\n\nvar Login =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Login, _Component);\n\n  function Login(props, context) {\n    var _this;\n\n    _classCallCheck(this, Login);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Login).call(this, props, context));\n    _this.state = {\n      captchaRef: null,\n      reCaptchaToken: '',\n      btnDisabled: true\n    };\n\n    _this.onChange = function (recaptchaToken) {\n      console.log(\"recaptchaToken: \", recaptchaToken);\n\n      _this.setState({\n        reCaptchaToken: recaptchaToken,\n        btnDisabled: false\n      });\n    };\n\n    _this.setCaptchaRef = function (ref) {\n      _this.setState({\n        captchaRef: React.createRef(ref)\n      });\n    };\n\n    _this.generateCaptcha = function (formProps) {\n      return React.createElement(Captcha, {\n        formProps: formProps,\n        setCaptchaRef: _this.setCaptchaRef,\n        onChange: _this.onChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      });\n    };\n\n    _this.onSubmit =\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(formValues) {\n        var values;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                values = formValues;\n                values.grant_type = \"password\";\n                window.alert(\"You submitted:\\n\\n\".concat(JSON.stringify(formValues, null, 2)));\n                _context.next = 5;\n                return _this.props.doLogin('/api/login', values);\n\n              case 5:\n                _this.fireNotification();\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    _this.fireNotification = function () {\n      console.log(\"NOTIFY RAN!\");\n      var notify = _this.props.notify;\n      notify({\n        title: 'Login Submitted',\n        message: 'you clicked on the Submit button',\n        status: 'success',\n        position: 'br',\n        dismissible: true,\n        dismissAfter: 3000\n      });\n    };\n\n    ActiveLanguageAddTranslation(_this.props.activeLanguage, _this.props.addTranslationForLanguage);\n    return _this;\n  }\n\n  _createClass(Login, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      document.title = \"ProStaff\";\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      var hasActiveLanguageChanged = prevProps.activeLanguage !== this.props.activeLanguage;\n\n      if (hasActiveLanguageChanged) {\n        this.props.push(\"/auth/\".concat(this.props.activeLanguage.code));\n        ActiveLanguageAddTranslation(this.props.activeLanguage, this.props.addTranslationForLanguage);\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      //Username gets \"remembered\", not erase but password gets overwritten to empty string\n      if (this.props.rememberme === true) {\n        this.props.change(\"password\", \"\");\n        this.props.untouch(\"Login\", \"password\");\n      } else {\n        this.props.reset(\"Login\"); //Reset form fields all to empty\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var activeLanguage = this.props.activeLanguage;\n      var forgotPasswordRoute = \"/resetpassword/\".concat(activeLanguage.code);\n      var registerRoute = \"/register/\".concat(activeLanguage.code);\n      return React.createElement(\"div\", {\n        className: \"container-fluid login-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-md-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"login-form\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"panel panel-default login-form-panel\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"panel-heading login-header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        className: \"text-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, React.createElement(Translate, {\n        id: \"com.tempedge.msg.label.sign_in\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, \"Sign In\"))), React.createElement(\"form\", {\n        className: \"panel-body\",\n        onSubmit: this.props.handleSubmit(this.onSubmit),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"text-left label-p\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, React.createElement(Translate, {\n        id: \"com.tempedge.msg.label.username\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, \"Username\")), React.createElement(Field, {\n        name: \"username\",\n        type: \"text\",\n        placeholder: \"Enter username\",\n        category: \"person\",\n        component: InputBox,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"text-left label-p\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, React.createElement(Translate, {\n        id: \"com.tempedge.msg.label.password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, \"Password\")), React.createElement(Field, {\n        name: \"password\",\n        type: \"text\",\n        placeholder: \"Enter password\",\n        category: \"person\",\n        component: InputBox,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"clearfix\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        className: \"pull-left checkbox-inline label-p\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, React.createElement(Field, {\n        name: \"rememberme\",\n        id: \"rememberme\",\n        component: \"input\",\n        type: \"checkbox\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }), React.createElement(\"span\", {\n        style: {\n          marginLeft: 4\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, React.createElement(Translate, {\n        id: \"com.tempedge.msg.label.remember_me\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, \"Remember me\"))), React.createElement(Link, {\n        to: forgotPasswordRoute,\n        className: \"pull-right forgot-password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, React.createElement(Translate, {\n        id: \"com.tempedge.msg.label.password_retrieve\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, \"Forgot Password?\"))), React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        type: \"submit\",\n        className: \"btn btn-primary btn-block\",\n        disabled: this.props.invalid || this.props.submiting || this.props.pristine || this.state.btnDisabled,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, React.createElement(Translate, {\n        id: \"com.tempedge.msg.label.sign_in\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, \"Sign In\")))), React.createElement(\"div\", {\n        className: \"captcha-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"mx-auto captcha-panel\",\n        style: {\n          width: \"304px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, React.createElement(Field, {\n        name: \"captcha\",\n        size: \"normal\",\n        height: \"130px\",\n        theme: \"light\",\n        component: this.generateCaptcha,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"panel-footer login-footer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"text-right no-account-query\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, React.createElement(Translate, {\n        id: \"com.tempedge.msg.label.no_account\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, \"Don't have an account?\")), React.createElement(\"span\", {\n        className: \"text-right register-link\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, React.createElement(Link, {\n        className: \"create-account\",\n        to: registerRoute,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, React.createElement(Translate, {\n        id: \"com.tempedge.msg.label.create_account\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, \"Create Account\")))))))));\n    }\n  }]);\n\n  return Login;\n}(Component);\n\nLogin.propTypes = {\n  doLogin: PropTypes.func.isRequired,\n  reset: PropTypes.func.isRequired,\n  change: PropTypes.func.isRequired,\n  untouch: PropTypes.func.isRequired //Current REDUX state\n\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  // console.log(\"state.form.login: \", state.form.login);\n  var rememberUser = null;\n\n  if (typeof state.form.login !== \"undefined\") {\n    if (typeof state.form.login.values !== \"undefined\") {\n      if (typeof state.form.login.values.rememberme !== \"undefined\") rememberUser = state.form.login.values.rememberme;\n    }\n  }\n\n  return {\n    status: state.tempEdge.login !== \"\" ? state.tempEdge.login.portalUserList[0].status : null,\n    rememberme: rememberUser\n  };\n};\n\nLogin = reduxForm({\n  form: 'login',\n  destroyOnUnmount: false,\n  //        <------ preserve form data\n  validate: Validate\n})(Login);\nexport default withLocalize(connect(mapStateToProps, {\n  doLogin: doLogin,\n  push: push,\n  notify: notify,\n  reset: reset,\n  change: change,\n  untouch: untouch\n})(Login));","map":{"version":3,"sources":["C:\\Users\\migue\\Documents\\Jose\\TempEdge\\tempedgereact\\tempedgereact - jose\\src\\Pages\\Login\\Login.js"],"names":["React","Component","Link","connect","reset","change","untouch","PropTypes","InputBox","Field","reduxForm","withLocalize","Translate","Captcha","Validate","ActiveLanguageAddTranslation","push","notify","httpService","actions","doLogin","Login","props","context","state","captchaRef","reCaptchaToken","btnDisabled","onChange","recaptchaToken","console","log","setState","setCaptchaRef","ref","createRef","generateCaptcha","formProps","onSubmit","formValues","values","grant_type","window","alert","JSON","stringify","fireNotification","title","message","status","position","dismissible","dismissAfter","activeLanguage","addTranslationForLanguage","document","prevProps","prevState","hasActiveLanguageChanged","code","rememberme","forgotPasswordRoute","registerRoute","handleSubmit","marginLeft","invalid","submiting","pristine","width","propTypes","func","isRequired","mapStateToProps","rememberUser","form","login","tempEdge","portalUserList","destroyOnUnmount","validate"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { reset, change, untouch } from 'redux-form';\r\nimport PropTypes from 'prop-types';\r\nimport InputBox from '../../components/common/InputBox/InputBox.js';\r\nimport { Field, reduxForm } from 'redux-form';\r\nimport { withLocalize, Translate } from 'react-localize-redux';\r\nimport Captcha from '../../components/common/Captcha/Captcha';\r\nimport Validate from '../Validations/Validations';\r\nimport ActiveLanguageAddTranslation from '../../components/common/ActiveLanguageAddTranslation/ActiveLanguageAddTranslation.js';\r\nimport { push } from 'connected-react-router';\r\nimport { notify } from 'reapop';\r\nimport httpService from '../../utils/services/httpService/httpService.js';\r\nimport actions from '../../Redux/actions/tempEdgeActions.js'\r\nimport { doLogin } from '../../Redux/actions/tempEdgeActions';\r\n\r\n\r\nclass Login extends Component{\r\n  constructor(props, context) {\r\n    super(props, context);\r\n\r\n    ActiveLanguageAddTranslation(this.props.activeLanguage, this.props.addTranslationForLanguage);\r\n  }\r\n\r\n  state = { captchaRef: null, reCaptchaToken: '', btnDisabled: true }\r\n\r\n  componentDidMount(){\r\n    document.title = \"ProStaff\";\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState){\r\n    const hasActiveLanguageChanged = prevProps.activeLanguage !== this.props.activeLanguage;\r\n\r\n    if (hasActiveLanguageChanged) {\r\n      this.props.push(`/auth/${this.props.activeLanguage.code}`);\r\n      ActiveLanguageAddTranslation(this.props.activeLanguage, this.props.addTranslationForLanguage);\r\n    }\r\n  }\r\n\r\n  componentWillUnmount(){\r\n    //Username gets \"remembered\", not erase but password gets overwritten to empty string\r\n    if(this.props.rememberme === true){\r\n      this.props.change(\"password\", \"\");\r\n      this.props.untouch(\"Login\", \"password\");\r\n    }else{\r\n      this.props.reset(\"Login\");    //Reset form fields all to empty\r\n    }\r\n  }\r\n\r\n  onChange = (recaptchaToken) => {\r\n    console.log(\"recaptchaToken: \", recaptchaToken);\r\n\r\n    this.setState({\r\n      reCaptchaToken: recaptchaToken,\r\n      btnDisabled: false\r\n    });\r\n  }\r\n\r\n  setCaptchaRef = (ref) => {\r\n    this.setState({\r\n      captchaRef: React.createRef(ref)\r\n    });\r\n  }\r\n\r\n  generateCaptcha = (formProps) => {\r\n    return <Captcha formProps={formProps} setCaptchaRef={this.setCaptchaRef} onChange={this.onChange} />;\r\n  }\r\n\r\n  onSubmit = async (formValues) => {\r\n    let values = formValues;\r\n    values.grant_type = \"password\";\r\n    window.alert(`You submitted:\\n\\n${JSON.stringify(formValues, null, 2)}`);\r\n\r\n    await this.props.doLogin('/api/login', values);\r\n\r\n    this.fireNotification();\r\n  }\r\n\r\n  fireNotification = () => {\r\n    console.log(\"NOTIFY RAN!\");\r\n    let { notify } = this.props;\r\n\r\n    notify({\r\n      title: 'Login Submitted',\r\n      message: 'you clicked on the Submit button',\r\n      status: 'success',\r\n      position: 'br',\r\n      dismissible: true,\r\n      dismissAfter: 3000\r\n    });\r\n  }\r\n\r\n  render(){\r\n    let { activeLanguage }  = this.props;\r\n    let forgotPasswordRoute = `/resetpassword/${activeLanguage.code}`;\r\n    let registerRoute = `/register/${activeLanguage.code}`;\r\n\r\n    return(\r\n      <div className=\"container-fluid login-container\">\r\n        <div className=\"row\">\r\n          <div className=\"col-md-12\">\r\n            <div className=\"login-form\">\r\n              <div className=\"panel panel-default login-form-panel\">\r\n                <div className=\"panel-heading login-header\">\r\n                  <h2 className=\"text-center\"><Translate id=\"com.tempedge.msg.label.sign_in\">Sign In</Translate></h2>\r\n                </div>\r\n                <form className=\"panel-body\" onSubmit={this.props.handleSubmit(this.onSubmit)}>\r\n                    <div className=\"form-group\">\r\n                      <p className=\"text-left label-p\"><Translate id=\"com.tempedge.msg.label.username\">Username</Translate></p>\r\n                      <Field name=\"username\" type=\"text\" placeholder=\"Enter username\" category=\"person\" component={InputBox} />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                      <p className=\"text-left label-p\"><Translate id=\"com.tempedge.msg.label.password\">Password</Translate></p>\r\n                      <Field name=\"password\" type=\"text\" placeholder=\"Enter password\"category=\"person\" component={InputBox} />\r\n                    </div>\r\n                    <div className=\"clearfix\">\r\n                        <label className=\"pull-left checkbox-inline label-p\">\r\n                          <Field name=\"rememberme\" id=\"rememberme\" component=\"input\" type=\"checkbox\"/>\r\n                          <span style={{marginLeft: 4}}><Translate id=\"com.tempedge.msg.label.remember_me\">Remember me</Translate></span>\r\n                        </label>\r\n                        <Link to={forgotPasswordRoute} className=\"pull-right forgot-password\"><Translate id=\"com.tempedge.msg.label.password_retrieve\">Forgot Password?</Translate></Link>\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <button type=\"submit\" className=\"btn btn-primary btn-block\" disabled={this.props.invalid || this.props.submiting || this.props.pristine || this.state.btnDisabled}><Translate id=\"com.tempedge.msg.label.sign_in\">Sign In</Translate></button>\r\n                    </div>\r\n                </form>\r\n                <div className=\"captcha-container\">\r\n                  <div className=\"mx-auto captcha-panel\" style={{width: \"304px\"}}>\r\n                    <Field name='captcha' size=\"normal\" height=\"130px\" theme=\"light\" component={this.generateCaptcha} />\r\n                  </div>\r\n                </div>\r\n                <div className=\"panel-footer login-footer\">\r\n                  <span className=\"text-right no-account-query\"><Translate id=\"com.tempedge.msg.label.no_account\">Don't have an account?</Translate></span>\r\n                  <span className=\"text-right register-link\"><Link className=\"create-account\" to={registerRoute}><Translate id=\"com.tempedge.msg.label.create_account\">Create Account</Translate></Link></span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n\r\nLogin.propTypes = {\r\n  doLogin: PropTypes.func.isRequired,\r\n  reset: PropTypes.func.isRequired,\r\n  change: PropTypes.func.isRequired,\r\n  untouch: PropTypes.func.isRequired\r\n}\r\n                      //Current REDUX state\r\nlet mapStateToProps = (state) => {\r\n  // console.log(\"state.form.login: \", state.form.login);\r\n  let rememberUser = null;\r\n\r\n  if(typeof state.form.login !== \"undefined\"){\r\n    if(typeof state.form.login.values !== \"undefined\"){\r\n      if(typeof state.form.login.values.rememberme !== \"undefined\")\r\n        rememberUser = state.form.login.values.rememberme;\r\n    }\r\n  }\r\n\r\n  return({\r\n    status: (state.tempEdge.login !== \"\")? state.tempEdge.login.portalUserList[0].status: null,\r\n    rememberme: rememberUser\r\n  });\r\n}\r\n\r\nLogin = reduxForm({\r\n  form: 'login',\r\n  destroyOnUnmount: false, //        <------ preserve form data\r\n  validate: Validate\r\n})(Login);\r\n\r\nexport default withLocalize(connect(mapStateToProps, { doLogin, push, notify, reset, change , untouch })(Login));\r\n"]},"metadata":{},"sourceType":"module"}